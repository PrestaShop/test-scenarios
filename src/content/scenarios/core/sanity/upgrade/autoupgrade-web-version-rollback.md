---
title: "Autoupgrade - Web Version - Rollback "
weight: 4
---

# Autoupgrade - Web Version - Rollback 
## Details
* **Component** : Core
* **Status** : In progress
* **Scenario** : https://forge.prestashop.com/browse/TEST-9679

## Steps
| Step Description | Expected result |
| ----- | ----- |
| Install a fresh 8.0.4 with php 8.1 | * The new shop is installed<br> * The selection to BO or FO is displayed |
| Go to the BO. | Log in page is displayed. |
| Log in with email and password set during installation. | * Connection successful<br> * Dashboard displayed |
| Go to Modules > Module manager. | Module manager page is displayed. |
| Click on the CTA "Upload a module". | Modal "Upload a module" is displayed. |
| Select or drag and drop the .zip. | * The module is installing<br> * The module is installed, the CTA "Configure" is displayed. |
| Close the modal. | * Modal is closed<br> * Module manager page is displayed |
| Refresh the page. | Page is refreshed. |
| Search for "Update". | Update Assistant is displayed. |
| Check for the version. | * The version is the latest in prod. <br><br> * The lastest version in prod is displayed because it is the version available on the marketplace. |
| Go to the Shop Parameters > General. | General > Preferences page is displayed on the "General" tab. |
| Click on the "Maintenance" tab. | "Maintenance" tab is displayed. |
| Click on the toggle "Enable store" | Toggle is in "No" status. |
| Click on the CTA "Add my IP". | IP address is filled. |
| Click on the CTA "Save". | Shop is in maintenance mode. |
| Go to "Update Assistant" module (side board). | * "Update Assistant" module is displayed : <br><br> ** Title : "Welcome to PrestaShop Update Assistant"<br> ** Two radio buttons : "Update your store" and "Restore from a backup" (disabled)<br> ** CTA "Get started" disabled |
| Select the radio button "Update your store". | * "Update your store" radio button is selected<br> * CTA "Get started" is enabled |
| Click on the CTA "Get started". | * A loader is displayed in the CTA "Get started" then, "Version choice" page is displayed : <br><br> * <br> ** Stepper on step one ("Version choice")<br> ** Paragraph with "A more recent version is available / Current PrestaShop version: [your current version of prestashop]/ Current PHP version: [your current version of php]<br> ** Radio button : PrestaShop [last version enabled] [(Patch/minor or Major) version](blue color rgb(190, 234, 243)) with description "The maximum version of PrestaShop to which you can update your store, based on its PHP version." and the link "Release note" <br> ** Blue alert info : " Unlock the local update feature and manually update your store to your preferred upgrade by saving the archive and XML files of the PrestaShop version in the following directory on your server: */your-admin-directory/autoupgrade/download/*"<br> ** CTA : "Next" disabled |
| * Clic on the Radio button next to "Prestashop [last version]"<br> * The check is finished | * Checking requirement is launched then is finished :<br><br> ** "The requirements check is complete, you can update your store to this version of PrestaShop."<br> ** Or warnings <br> ** CTA "Next" is enabled |
| * Click on the CTA "Next". | * "Update options" page is displayed :  <br><br> ** Stepper on step 2 ("Update options")<br> ** 3 toggles : "Deactivate non-native modules", "Regenerate email templates" , "Disable all overrides"  with details about them under their name <br> ** CTA "Next" enabled |
| Click on the CTA "Next". | * "Back up your store" page is displayed :  <br><br> ** Stepper on step 3 ("Backup")<br> ** Subtitle "Backing up your store's files, database, and images means you can restore to a previous version if something goes wrong during the update. This keeps your data safe and ensures your business stays up and running."<br> ** Toggle : "Include images in your backup" on Yes status<br> ** 2 CTAs : "Update without backup" and "Launch backup" (both available) |
| Click on the CTA "Launch backup". | Modal "Start backup?" is displayed : <br> * Text : "Your files, database, and images will be backed up."<br> * 2 CTAs : "Cancel" and "Start backup" |
| Click on the CTA "Start Backup". | The "Backup" page is displayed :<br><br> <br> * loading bar with the current process <br> * details of the current process are listed |
| Wait until the end of the backup | The title is modified : " Back up your store" : <br> * The success alert "Backup completed" is displayed<br> * CTA "Download backup logs"<br> * CTA : "Start update" |
| Go to "Update Assistant" module (side board). | * "Update Assistant" module is displayed : <br><br> ** Title : "Welcome to PrestaShop Update Assistant"<br> ** Two radio buttons : "Update your store" and "Restore from a backup" (disabled)<br> ** CTA "Get started" disabled |
| Select the radio button "Update your store". | * "Update your store" radio button is selected<br> * CTA "Get started" is enabled |
| Click on the CTA "Get started". | * A loader is displayed in the CTA "Get started" then, "Version choice" page is displayed : <br><br> * <br> ** Stepper on step one ("Version choice")<br> ** Paragraph with "A more recent version is available / Current PrestaShop version: [your current version of prestashop]/ Current PHP version: [your current version of php]<br> ** Radio button : PrestaShop [last version enabled] [(Patch/minor or Major) version](blue color rgb(190, 234, 243)) with description "The maximum version of PrestaShop to which you can update your store, based on its PHP version." and the link "Release note" <br> ** Blue alert info : " Unlock the local update feature and manually update your store to your preferred upgrade by saving the archive and XML files of the PrestaShop version in the following directory on your server: */your-admin-directory/autoupgrade/download/*"<br> ** CTA : "Next" disabled |
| * Clic on the Radio button next to "Prestashop [last version]"<br> * The check is finished | * Checking requirement is launched then is finished :<br><br> ** "The requirements check is complete, you can update your store to this version of PrestaShop."<br> ** Or warnings <br> ** CTA "Next" is enabled |
| * Click on the CTA "Next". | * "Update options" page is displayed :  <br><br> ** Stepper on step 2 ("Update options")<br> ** 3 toggles : "Deactivate non-native modules", "Regenerate email templates" , "Disable all overrides"  with details about them under their name <br> ** CTA "Next" enabled |
| Click on the CTA "Next". | * "Back up your store" page is displayed :  <br><br> ** Stepper on step 3 ("Backup")<br> ** Subtitle "Backing up your store's files, database, and images means you can restore to a previous version if something goes wrong during the update. This keeps your data safe and ensures your business stays up and running."<br> ** Toggle : "Include images in your backup" on Yes status<br> ** 2 CTAs : "Update without backup" and "Launch backup" (both available) |
| Click on the CTA "Launch backup". | Modal "Start backup?" is displayed : <br> * Text : "Your files, database, and images will be backed up."<br> * 2 CTAs : "Cancel" and "Start backup" |
| Click on the CTA "Start Backup". | The "Backup" page is displayed :<br><br> <br> * loading bar with the current process <br> * details of the current process are listed |
| Wait until the end of the backup | The title is modified : " Back up your store" : <br> * The success alert "Backup completed" is displayed<br> * CTA "Download backup logs"<br> * CTA : "Start update" |
| Go to "Update Assistant" module (side board). | * "Update Assistant" module is displayed : <br><br> ** Title : "Welcome to PrestaShop Update Assistant"<br> ** Two radio buttons : "Update your store" and "Restore from a backup" (disabled)<br> ** CTA "Get started" disabled |
| Select the radio button "Update your store". | * "Update your store" radio button is selected<br> * CTA "Get started" is enabled |
| Click on the CTA "Get started". | * A loader is displayed in the CTA "Get started" then, "Version choice" page is displayed : <br><br> * <br> ** Stepper on step one ("Version choice")<br> ** Paragraph with "A more recent version is available / Current PrestaShop version: [your current version of prestashop]/ Current PHP version: [your current version of php]<br> ** Radio button : PrestaShop [last version enabled] [(Patch/minor or Major) version](blue color rgb(190, 234, 243)) with description "The maximum version of PrestaShop to which you can update your store, based on its PHP version." and the link "Release note" <br> ** Blue alert info : " Unlock the local update feature and manually update your store to your preferred upgrade by saving the archive and XML files of the PrestaShop version in the following directory on your server: */your-admin-directory/autoupgrade/download/*"<br> ** CTA : "Next" disabled |
| * Clic on the Radio button next to "Prestashop [last version]"<br> * The check is finished | * Checking requirement is launched then is finished :<br><br> ** "The requirements check is complete, you can update your store to this version of PrestaShop."<br> ** Or warnings <br> ** CTA "Next" is enabled |
| * Click on the CTA "Next". | * "Update options" page is displayed :  <br><br> ** Stepper on step 2 ("Update options")<br> ** 3 toggles : "Deactivate non-native modules", "Regenerate email templates" , "Disable all overrides"  with details about them under their name <br> ** CTA "Next" enabled |
| Click on the CTA "Next". | * "Back up your store" page is displayed :  <br><br> ** Stepper on step 3 ("Backup")<br> ** Subtitle "Backing up your store's files, database, and images means you can restore to a previous version if something goes wrong during the update. This keeps your data safe and ensures your business stays up and running."<br> ** Toggle : "Include images in your backup" on Yes status<br> ** 2 CTAs : "Update without backup" and "Launch backup" (both available) |
| Click on the CTA "Launch backup". | Modal "Start backup?" is displayed : <br> * Text : "Your files, database, and images will be backed up."<br> * 2 CTAs : "Cancel" and "Start backup" |
| Click on the CTA "Start Backup". | The "Backup" page is displayed :<br><br> <br> * loading bar with the current process <br> * details of the current process are listed |
| Wait until the end of the backup | The title is modified : " Back up your store" : <br> * The success alert "Backup completed" is displayed<br> * CTA "Download backup logs"<br> * CTA : "Start update" |
| Go to "Update Assistant" module (side board). | "Update Assistant" module is displayed : <br> * Title : "Welcome to PrestaShop Update Assistant"<br> * Two radio buttons : "Update your store" and "Restore from a backup" (disabled)<br> * CTA "Get started" disabled |
| Select the radio button "Restore from a backup" | * "Restore from a backup" radio button is selected<br> * CTA "Get started" is enabled |
| Click on the CTA "Get started". | * A loader is displayed in the CTA "Get started" then, "Backup Selection" page is displayed : <br><br> ** Stepper on step one ("1 : Backup Selection")<br> ** Paragraph with "Select the backup you want to restore"<br> ** Droplist with selected " MM/DD/AA,HH/MM [AM/PM] - V8.0.3_AAAAMMDD-HHMMSS-[random number] <br> ** 2 CTA : "Delete selection" and "Restore" |
| pl |  |
| * Click on the button "Delete selection" with trash icon | You should have a modal with :<br> * a Trash icon with a background red <br> * a title "Delete backup "<br> * a cross button<br> * a text description : You are about to delete the *[backup_name]* backup made on *[MM/DD/AA HH/MM/SS].* <br> * a button ** Cancel<br> * a button Delete with a red background |
| * Click on Cancel button or on the cross or on the space behind the modal<br> * Click on the drop list <br> * Click on the first backup of the list | * You should have the modal that disapear <br> * it should have three different backup <br> * the drop list should be closed on the last backup |
| * Click on the button "Delete selection" with trash icon | You should have a modal with :<br> * a Trash icon with a background red <br> * a title "Delete backup "<br> * a cross button<br> * a text description : You are about to delete the *[backup_name]* backup made on *[MM/DD/AA HH/MM/SS].* <br> * a button ** Cancel<br> * a button Delete with a red background |
| * Click on Delete button<br> * Click on the drop list <br> * Click again on the drop list | * You should have the modal that disapear <br> * it should have only two different backup <br> * the drop list should be closed on the last backup |
| * go to your folder [yourshop]/[adminDirectory]/autoupgrade/backup<br> * Delete the folder that have the same name that the backup selected in the droplist <br> * Return on your web page | * It should have 5 files : 2 zip, 2 folder and one index.php files <br> * The file should be correctly deleted<br> * There is no modification here |
| Click on Restore button | You should return on the previous page (without the same backup on the drop list) with a red notification under the drop list that said : <br><br>" ! Invalid configuration, [backupName] doesn't exist" |
| * Do a right click on the drop list<br> * Click on inspect<br> * Change the value of the first option on the drop list | * You should have all the different option when you do a right click <br> * You should have all different specification of the page and the part of the droplist should be highlighted <br> * The value should be changer |
| Click on CTA Restore | You should return on the previous page (with the same backup on the drop list) with a red notification under the drop list that said : <br><br>" ! Invalid configuration, *Backup name is missing* " |
| Click on Restore Button | You should have a modal with :<br> * a title "Restore from a backup?"<br> * a cross button<br> * a text description : You are about to restore *[PrestashopVersion]* using the backup from *[MM/DD/AA HH/MM/SS].* <br> * a button "Cancel"<br> * a button Restore with a blue background |
| Click on blue button Restore | * You should be on a new page named "Restore"<br> * You should have a stepper on top of the page set on "2 : Restore"<br> * The current process writted<br> * a load bar<br> * The details of the current process on a second tab |
| Wait until the end of the restore | You should have be on a new page with <br> * title : " Post-restore checklist "<br> * Stepper should be on "3 : Post-restore"<br> * A green notification : "Your restoration is complete"<br> * Sub title : "Next step" and Troubleshooting <br> * A link : "Download restore logs"<br> * 2 button : "Exit" and " Open developer documentation" |
| * Click on "Download restore logs" <br> * Click on "Open Developper Document"<br> * You can close the new tab showed | * The download of the restore on txt should be launched by your bowser<br> * A new tab should be open with the name "Post-restore checklist" <br> * You'll return on the post-restore checklist |
| Click on the button "Exit" | * You should be redirected to "[admin_folder]/index"<br> * Prestashop ask you to log in |
| * Click on the Update assistant button on the sideboard | * You should be in the new UI page with :<br> ** the title "Welcome to PrestaShop Update Assistant"<br> ** Two radio button with : Update your store and Restore from a backup <br> ** Radio button with the Restore shouldn't be disabled if you have a backup <br> ** A button "Get started" disabled |
| Clic on the radio button next to "Restore from a backup" | * Your radio button should be checked <br> * the button "Get starder" should be Enabled |
| Click on the button "Get started" | * You should have an image that show the load on the button get started until the load of the next page <br> * You should be on a new page named "Bacjup Selection"<br> * You should have a stepper on top of the page set on "1 : Backup Selection"<br> * In the page, it should be : <br><br> * <br> **  a paragraph with "Select the backup you want to restore to"<br><br> * <br> ** A droplist with a selected backup that have  : <br><br> *** a date in MM/DD/AA<br> *** a time in HH/MM/SS<br> *** the name of the backup<br> ** a button "Delete selection" with a trash icon at the end <br> ** A button named "Restore" enabled |
| * Click on the button "Delete selection" with trash icon | You should have a modal with :<br> * a Trash icon with a background red <br> * a title "Delete backup "<br> * a cross button<br> * a text description : You are about to delete the *[backupName]* backup made on *MM/DD/AA - HH/MM/SS*. As it's your only backup, you will be redirected to the module's home page.<br> * a button ** Cancel<br> * a button Delete with a red background |
| * Click on Delete button | * You should be in the new UI page with :<br> ** the title "Welcome to PrestaShop Update Assistant"<br> ** Two radio button with : Update your store and Restore from a backup <br> ** Radio button with the Restore should be disabled except if you have a backup <br> ** A button "Get started" disabled |
| * Go to "https://eu.mixpanel.com/project/2828312/view/3362352/app/events#9ad5X2HJqJ7y"<br> * set on filter the parameters | You should see : <br> * [SUE] Upgrade Launched<br> * [SUE] Upgrade succeeded<br> * [SUE] Restore launched<br> * [SUE] Restore succeeded <br><br>With the same User ID and php write like "X.X.XX" |
